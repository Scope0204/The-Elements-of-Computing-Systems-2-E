## 4장

>    하드웨어를 제어하는 기계어에 대해서 배운다.

<br>

### 1. 새롭게 알게 된 내용
* 기계어
	* 특정 메모리 위치에 접근해서 메모리 조작
	* 하드웨어 요소
		* 메모리
			* ==데이터==와 ==명령어==를 저장하는 하드웨어 장치
			* 고유한 주소를 가지며, 위치 또는 메모리 레지스터로도 참조될 수 있는 셀들의 연속적인 배열
		* 프로세서
			* 중앙 처리 장치(Central Processing Unit, CPU)
			* 산술 및 논리 연산, 메모리 접근 연산, 제어 또는 분기 연산 등 특정 기초 연산 수행
			* 2진 명령을 파싱하고 실행하여 선택한 레지스터나 메모리 위치에서 입력을 가져와 선택된 레지스터나 메모리 위치에 출력을 기록
			*  게이트 논리 + ALU + 레지스터 모음
			* 보통 값 하나를 저장할 수 있는 레지스터를 여러 개 장착(로컬 고속 메모리 역할)
		* 레지스터
			* CPU 내부 레지스터
				* 데이터 레지스터
					* 데이터 저장
				* 주소 레지스터
					* 데이터 값이나 메모리 주소로 해석되는 값들을 저장
				* 주소 레지스터에 특정 값 n을 설정할 경우 주소가 n인 메모리 위치가 즉시 선택되도록 구성됨. 선택된 메모리 위치에서 후속 연산을 수행할 준비를 마침
	* 언어
		* 2진 코드(binary)
		* 기호(symbolic) 기계어 = **어셈블리(assembly)어**
			* Assembly어 문법은 ALU에서 가능한 연산, 레지스터의 수와 종류, 메모리 크기 등 대상 하드웨어의 저수준 특성과 밀접한 관련
			![](./images/image%20copy%204.png)
	* 명령어
		* 산술 및 논리 연산
			* 덧셈, 뺄셈 등 **기본 산술 연산**
			* And, Or, Not 등 **기본 논리 연산**
		* 메모리 접근
			* **주소 레지스터 A**를 통해 특정 메모리 위치에 접근 -> 메모리 조작
		* 흐름 제어
			* 다음 명령어 수행하는 대신 특정 위치로 점프
			* 조건 goto
			* 무조건 goto
			* 레이블 선언문
				* goto의 목적지 설정
		* 기호
			* 어셈블리어의 표현 매체 중 하나
			* 기호 참조 코드 = 재배치 가능한(reloctable) 코드
			* 물리적 메모리 주소와 얽히지 않도록 만들어줌
			* 기호 참조 어셈블리 코드가 물리적 주소 참조 방식보다 작성, 디버그, 유지보수 측면에서 훨씬 용이함
* 핵 기계어
	* 메모리
		* 데이터 메모리(RAM)
			* 프로그램이 조작하는 2진 값 저장
			* 읽기, 쓰기 가능
			* address 입력에 의해 선택된 레지스터 = M
		* 명령어 메모리(ROM)
			* 프로그램의 명령어 저장
			* 읽기 전용
			* address 입력에 의해 선택된 레지스터의 값 = 현재 명령어
	* 레지스터
		* 데이터 레지스터(D)
			* 16비트 값 저장
		* 주소 레지스터(A)
			* 데이터 메모리 및 명령어 메모리의 주소 지정
			* 보조 데이터 레지스터
		* 선택된 데이터 레지스터(M)
	* 주소 지정
		* 핵 명령어 @xxx 하나로
			* 주소 레지스터 A에 값 xxx 설정
			* 주소가 xxx인 RAM 레지스터를 '선택된 메모리 레지스터' M으로 설정 
			* 주소가 xxx인 ROM 레지스터 값을 '선택된 명령어'로 설정
	* 분기 
	* 변수
* 핵 언어 명세
	* A-명령어
	* C-명령어
	* 계산 명세
	* 목적지 명세
	* 점프 지정
	* A 레지스터를 사용할 때 충돌 방지
* 기호
	* 선언 기호
	* R0, R1, ... R15
	* SP, LCL, ARG, THIS, THAT
	* SCREEN, KBD
	* 레이블 기호
	* 변수 기호
* 입력/출력 처리
	* 스크린
	* 키보드
* 구문 규칙과 파일 형식
	* 2진 코드 파일
	* 어셈블리어 파일
	* 상수와 기호
	* 주석
	* 공백
	* 대소문자 규칙 

### 2. 어려웠거나 궁금했던 점
* 16 비트 핵 컴퓨터에서 데이터 메모리와 명령어 메모리는 모두 폭이 16비트이고, 각각 주소 공간은 15비트다. 따라서 각 메모리에서 주소 지정 가능한 최대 크기는 2^15 또는 32K 16 비트 단어에 해당한다. 